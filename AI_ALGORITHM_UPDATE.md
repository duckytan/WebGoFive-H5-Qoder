# AI算法模式更新说明

## 版本信息
- **版本**: v2.0.0
- **更新日期**: 2024
- **更新类型**: 功能增强

## 更新概述

本次更新为五子棋游戏引入了**AI算法模式选择**功能，玩家现在可以在两种不同的AI算法之间切换，体验不同的对弈风格和棋力。

## 新增功能

### 1. AI算法模式选择

在游戏设置中新增了"AI算法"选项，提供两种算法模式：

#### 经典算法 (CLASSIC)
- **特点**: 基于评分表和Alpha-Beta剪枝的平衡策略
- **优势**: 思考速度快，响应迅速
- **适用场景**: 日常对局、快速游戏
- **技术栈**:
  - 评分表驱动的棋型识别
  - Alpha-Beta剪枝搜索（深度3层）
  - VCF（连续冲四）搜索
  - 双威胁检测与防守
  - 活三防守机制

#### 深度搜索算法 (ADVANCED)
- **特点**: 采用更深层搜索和多种高级技术
- **优势**: 棋力更强，战术更丰富
- **适用场景**: 高水平对局、学习研究
- **技术栈**:
  - **开局库**: 天元、瑞星、花月、恒星等经典开局定式
  - **更深搜索**: 迭代加深搜索，最大深度5层
  - **威胁序列分析**: 多步连续威胁判断
  - **VCF搜索**: 更完善的必胜搜索算法
  - **改进的评分系统**: 更精细的棋型评估
  - **智能候选生成**: 根据局面动态调整搜索范围

### 2. 思考时间优化

不同算法模式下的思考时间自动适配：

| 难度级别 | 经典算法 | 深度搜索算法 |
|---------|---------|-------------|
| 新手    | 500ms   | 600ms       |
| 正常    | 900ms   | 1100ms      |
| 困难    | 1400ms  | 1800ms      |
| 地狱    | 1800ms  | 2400ms      |

### 3. 用户界面增强

- 设置界面新增AI算法选择下拉菜单
- 实时显示当前算法模式的描述信息
- 切换算法时提供视觉反馈

## 技术实现

### 核心文件

#### 新增文件
- `js/ai-advanced.js`: 深度搜索AI算法实现
  - AdvancedAI类：封装所有高级算法逻辑
  - 开局库管理
  - 棋型模式识别
  - 深度搜索引擎

#### 修改文件
- `js/game-core.js`:
  - 添加`aiAlgorithmMode`属性
  - 添加`setAIAlgorithmMode()`方法
  - 修改`getAIMove()`方法以支持算法选择
  
- `js/demo.js`:
  - 添加`setAIAlgorithmMode()`方法
  - 添加`updateAlgorithmDescription()`方法
  - 添加`getAIAlgorithmLabel()`方法
  - 修改`getAIThinkingDuration()`以支持不同算法的思考时间

- `index.html`:
  - 设置模态框中添加AI算法选择区域
  - 引入`ai-advanced.js`脚本

- `css/style.css`:
  - 添加算法描述样式

### 算法对比

#### 经典算法特性
```javascript
// 决策流程
1. 立即获胜检测
2. 阻止对手获胜
3. VCF搜索（地狱难度）
4. VCF防守（地狱难度）
5. 双威胁防守
6. 活三防守
7. Alpha-Beta搜索（深度3）
```

#### 深度搜索算法特性
```javascript
// 决策流程
1. 开局库匹配（前3手）
2. 立即获胜检测
3. 阻止对手获胜
4. VCF必胜搜索（地狱难度）
5. VCF防守搜索（地狱难度）
6. 威胁序列分析（困难+地狱）
7. 迭代加深搜索（深度2-5）
```

#### 评分系统改进

深度搜索算法采用了更细致的棋型评分：

| 棋型类型 | 经典算法评分 | 深度搜索算法评分 |
|---------|-------------|----------------|
| 五连    | 1,000,000   | 10,000,000     |
| 活四    | 160,000     | 200,000        |
| 冲四    | 55,000      | 80,000         |
| 活三    | 12,000      | 15,000         |
| 眠三    | 2,600       | 3,500          |
| 活二    | 600         | 1,000          |

## 使用方法

### 切换AI算法

1. 点击游戏界面右上角的**设置**按钮（⚙️图标）
2. 在设置对话框中找到"AI算法"部分
3. 从下拉菜单中选择：
   - **经典算法**: 快速响应的平衡策略
   - **深度搜索算法**: 更强棋力的高级算法
4. 点击"保存设置"
5. 开始新游戏体验不同的AI表现

### 建议使用场景

- **学习五子棋基础**: 使用经典算法，新手或正常难度
- **提升棋艺**: 使用深度搜索算法，困难难度
- **极限挑战**: 使用深度搜索算法，地狱难度
- **快速对局**: 使用经典算法，任意难度

## 性能考量

- **经典算法**: 优化了速度与棋力的平衡，适合所有设备
- **深度搜索算法**: 需要更多计算资源，建议在现代浏览器和较新设备上使用
- 两种算法都实现了迭代加深和时间限制，确保响应及时

## 未来改进方向

1. **机器学习算法**: 基于神经网络的AI
2. **棋谱分析**: 导入职业棋谱学习
3. **自定义算法参数**: 让用户微调AI行为
4. **算法对战**: 观看不同算法之间的对局
5. **残局库**: 预计算的残局必胜走法

## 开发者注释

### 如何扩展新算法

1. 创建新的AI类（例如`MLAIAlgorithm`）
2. 实现`getMove(difficulty)`方法
3. 在`game-core.js`中注册新算法模式
4. 在`demo.js`中添加UI支持
5. 更新`index.html`的算法选择选项

### 算法接口规范

```javascript
class CustomAI {
    constructor(game) {
        this.game = game; // 游戏核心引擎实例
    }
    
    // 必须实现的方法
    getMove(difficulty) {
        // difficulty: 'BEGINNER' | 'NORMAL' | 'HARD' | 'HELL'
        // 返回: {x: number, y: number} 或 null
    }
}
```

## 测试建议

- 在不同难度级别下测试两种算法
- 验证算法切换的流畅性
- 检查思考时间是否合理
- 确认禁手规则在两种算法下都正确执行

## 已知问题

- 深度搜索算法在地狱难度下可能需要2-3秒思考时间
- 开局库目前仅包含3种常见开局，后续会扩展

## 贡献者

感谢所有为本项目贡献代码和想法的开发者。

## 许可证

本项目遵循原项目的开源许可证。

---

**更新完成** | 享受全新的AI对弈体验！
