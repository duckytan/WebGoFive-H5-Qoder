# 10 - å®Œæ•´å®ç°ç»†èŠ‚è¡¥å……

> **ç›®çš„**: è¡¥å……å‰é¢æ–‡æ¡£æœªæ¶µç›–çš„å®ç°ç»†èŠ‚ï¼Œç¡®ä¿AIèƒ½100%å¤åˆ»é¡¹ç›®

---

## 1. å®Œæ•´çš„HTMLç»“æ„

### 1.1 æ¨¡æ€æ¡†å®Œæ•´ç»“æ„

#### æ¸¸æˆç»“æœæ¨¡æ€æ¡†
```html
<div id="game-result-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="result-title">æ¸¸æˆç»“æŸ</h2>
        </div>
        <div class="modal-body">
            <div class="result-content">
                <div class="result-icon" id="result-icon">ğŸ‰</div>
                <div class="result-message" id="result-message">æ­å–œè·èƒœï¼</div>
                <div class="result-stats" id="result-stats">
                    <div class="result-stat">
                        <span class="stat-label">ç”¨æ—¶:</span>
                        <span class="stat-value" id="final-time">05:32</span>
                    </div>
                    <div class="result-stat">
                        <span class="stat-label">å›åˆ:</span>
                        <span class="stat-value" id="final-moves">25å›åˆ</span>
                    </div>
                    <div class="result-stat" id="vcf-best-record-container" style="display: none;">
                        <span class="stat-label">â­</span>
                        <span class="stat-value" id="vcf-best-record">å†å²æœ€å¿«: æœªè®°å½•</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn--primary" id="play-again-btn">
                <span class="icon">ğŸ®</span>å†æ¥ä¸€å±€
            </button>
            <button type="button" class="btn btn--secondary" id="close-result-btn">å…³é—­</button>
        </div>
    </div>
</div>
```

#### è®¾ç½®æ¨¡æ€æ¡†
```html
<div id="settings-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">æ¸¸æˆè®¾ç½®</h2>
            <button type="button" class="modal-close" id="close-settings-btn" aria-label="å…³é—­">&times;</button>
        </div>
        <div class="modal-body">
            <div class="settings-content">
                <!-- æ¸¸æˆè®¾ç½®ç»„ -->
                <div class="setting-group">
                    <h3 class="setting-group-title">æ¸¸æˆè®¾ç½®</h3>
                    <div class="setting-item">
                        <label for="default-mode">é»˜è®¤æ¨¡å¼:</label>
                        <select id="default-mode" class="select">
                            <option value="PvP">åŒäººå¯¹æˆ˜</option>
                            <option value="PvE" selected>äººæœºå¯¹æˆ˜</option>
                            <option value="EvE">æœºæœºå¯¹æˆ˜</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="default-difficulty">é»˜è®¤AIéš¾åº¦:</label>
                        <select id="default-difficulty" class="select">
                            <option value="BEGINNER">æ–°æ‰‹</option>
                            <option value="NORMAL" selected>æ­£å¸¸</option>
                            <option value="HARD">å›°éš¾</option>
                            <option value="HELL">åœ°ç‹±</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="default-hint-strength">é»˜è®¤æç¤ºå¼ºåº¦:</label>
                        <select id="default-hint-strength" class="select">
                            <option value="BEGINNER">æ–°æ‰‹</option>
                            <option value="NORMAL" selected>æ­£å¸¸</option>
                            <option value="HARD">å›°éš¾</option>
                            <option value="HELL">åœ°ç‹±</option>
                        </select>
                    </div>
                </div>

                <!-- ç•Œé¢è®¾ç½®ç»„ -->
                <div class="setting-group">
                    <h3 class="setting-group-title">ç•Œé¢è®¾ç½®</h3>
                    <div class="setting-item">
                        <label for="board-theme">æ£‹ç›˜ä¸»é¢˜:</label>
                        <select id="board-theme" class="select">
                            <option value="classic" selected>ç»å…¸æœ¨è´¨</option>
                            <option value="modern">ç°ä»£ç®€çº¦</option>
                            <option value="dark">æš—é»‘ä¸»é¢˜</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="sound-effects" checked>
                            <span class="checkmark"></span>
                            éŸ³æ•ˆå¼€å…³
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="animations" checked>
                            <span class="checkmark"></span>
                            åŠ¨ç”»æ•ˆæœ
                        </label>
                    </div>
                </div>

                <!-- AIç®—æ³•è®¾ç½®ç»„ -->
                <div class="setting-group">
                    <h3 class="setting-group-title">AIç®—æ³•</h3>
                    <div class="setting-item">
                        <label for="ai-algorithm-mode">ç®—æ³•æ¨¡å¼:</label>
                        <select id="ai-algorithm-mode" class="select">
                            <option value="CLASSIC" selected>ç»å…¸ç®—æ³•</option>
                            <option value="ADVANCED">æ·±åº¦æœç´¢ç®—æ³•</option>
                        </select>
                    </div>
                    <div class="algorithm-description" id="algorithm-description">
                        <p class="setting-description">
                            <strong>ç»å…¸ç®—æ³•ï¼š</strong>åŸºäºè¯„åˆ†è¡¨ä¸Alpha-Betaå‰ªæçš„å¹³è¡¡ç­–ç•¥ï¼Œæ€è€ƒè¿…é€Ÿï¼Œé€‚åˆæ—¥å¸¸å¯¹å±€ã€‚
                        </p>
                    </div>
                </div>

                <!-- æ™ºèƒ½è¾…åŠ©è®¾ç½®ç»„ -->
                <div class="setting-group">
                    <h3 class="setting-group-title">æ™ºèƒ½è¾…åŠ©</h3>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="risk-indicator-toggle" checked>
                            <span class="checkmark"></span>
                            é£é™©æç¤º
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="coordinate-display-toggle">
                            <span class="checkmark"></span>
                            åæ ‡æ˜¾ç¤º
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-save" checked>
                            <span class="checkmark"></span>
                            è‡ªåŠ¨ä¿å­˜
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="forbidden-hints" checked>
                            <span class="checkmark"></span>
                            ç¦æ‰‹æç¤º
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="hint-cooldown">æç¤ºå†·å´æ—¶é—´:</label>
                        <select id="hint-cooldown" class="select">
                            <option value="1000">1ç§’</option>
                            <option value="3000" selected>3ç§’</option>
                            <option value="5000">5ç§’</option>
                            <option value="10000">10ç§’</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn--primary" id="save-settings-btn">ä¿å­˜è®¾ç½®</button>
            <button type="button" class="btn btn--secondary" id="reset-settings-btn">æ¢å¤é»˜è®¤</button>
        </div>
    </div>
</div>
```

### 1.2 åŠ è½½å±å¹•

```html
<div id="loading-screen" class="loading-screen">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <div class="loading-text">åŠ è½½ä¸­...</div>
    </div>
</div>
```

**CSS**:
```css
.loading-screen {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, var(--board-wood-light) 0%, var(--board-wood-medium) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    transition: opacity 0.5s ease;
}

.loading-screen.hidden {
    opacity: 0;
    pointer-events: none;
}

.loading-spinner {
    width: 60px;
    height: 60px;
    border: 4px solid rgba(139, 69, 19, 0.3);
    border-top: 4px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
```

### 1.3 å¿«æ·é”®æç¤ºé¢æ¿

```html
<div id="keyboard-shortcuts" class="keyboard-shortcuts" style="display: none;">
    <div class="shortcuts-content">
        <h4>å¿«æ·é”®</h4>
        <div class="shortcut-list">
            <div class="shortcut-item">
                <kbd>H</kbd> <span>è·å–æç¤º</span>
            </div>
            <div class="shortcut-item">
                <kbd>Ctrl</kbd> + <kbd>Z</kbd> <span>æ‚”æ£‹</span>
            </div>
            <div class="shortcut-item">
                <kbd>Ctrl</kbd> + <kbd>N</kbd> <span>æ–°æ¸¸æˆ</span>
            </div>
            <div class="shortcut-item">
                <kbd>Esc</kbd> <span>å…³é—­å¼¹çª—</span>
            </div>
        </div>
    </div>
</div>
```

### 1.4 å›æ”¾æ­¥éª¤é¢æ¿

```html
<div class="steps-panel" id="replay-steps-panel" style="display: none;">
    <div class="steps-header">
        <h4>æ£‹å±€æ­¥éª¤</h4>
        <button type="button" class="close-steps" id="close-steps-panel">&times;</button>
    </div>
    <div class="steps-list" id="replay-steps-container">
        <!-- åŠ¨æ€ç”Ÿæˆ -->
        <!-- ç¤ºä¾‹æ­¥éª¤é¡¹ -->
        <div class="step-item" data-step="0">
            <span class="step-number">1</span>
            <span class="step-player">é»‘</span>
            <span class="step-position">H8</span>
            <span class="step-time">00:03</span>
        </div>
    </div>
</div>
```

---

## 2. CSSåŠ¨ç”»å®Œæ•´åˆ—è¡¨

### 2.1 æ ¸å¿ƒåŠ¨ç”»å…³é”®å¸§

```css
/* æ¨¡æ€æ¡†æ·¡å…¥ */
@keyframes fade-in-up {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* æ£‹å­è½ä¸‹ */
@keyframes piece-drop {
    0% {
        transform: translateY(-20px) scale(0.8);
        opacity: 0.7;
    }
    50% {
        transform: translateY(5px) scale(1.1);
        opacity: 0.9;
    }
    100% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
}

/* èƒœåˆ©åº†ç¥ */
@keyframes winner-celebration {
    0% { transform: scale(0) rotate(0deg); }
    50% { transform: scale(1.2) rotate(180deg); }
    100% { transform: scale(1) rotate(360deg); }
}

/* æç¤ºè„‰å†² */
@keyframes hint-pulse {
    0%, 100% {
        opacity: 0.6;
        transform: scale(1);
    }
    50% {
        opacity: 1;
        transform: scale(1.1);
    }
}

/* ç¦æ‰‹æŠ–åŠ¨ */
@keyframes forbidden-shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
    20%, 40%, 60%, 80% { transform: translateX(3px); }
}

/* é£é™©è­¦å‘Šé—ªçƒ */
@keyframes risk-warning {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.8; }
}

/* åŠ è½½æ—‹è½¬ */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* æŒ‰é’®ç‚¹å‡» */
@keyframes btn-click {
    0% { transform: scale(1); }
    50% { transform: scale(0.95); }
    100% { transform: scale(1); }
}

/* ä¾§è¾¹æ»‘å…¥ */
@keyframes slide-in-left {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}
```

### 2.2 åŠ¨ç”»åº”ç”¨ç±»

```css
.piece-drop { animation: piece-drop 0.4s ease-out; }
.hint-pulse { animation: hint-pulse 2s ease-in-out infinite; }
.risk-indicator { animation: risk-warning 1.5s ease-in-out infinite; }
.forbidden-warning { animation: forbidden-shake 0.6s ease-in-out; }
.btn-click { animation: btn-click 0.2s ease-out; }
.winner { animation: winner-celebration 1s ease-in-out; }
```

---

## 3. æ•°æ®æ ¼å¼å®Œæ•´å®šä¹‰

### 3.1 æ£‹å±€å­˜æ¡£JSONæ ¼å¼

```javascript
{
    "version": "1.0.1",
    "gameInfo": {
        "mode": "PvE",              // PvP | PvE | EvE | VCF_PRACTICE
        "difficulty": "NORMAL",     // BEGINNER | NORMAL | HARD | HELL
        "startTime": "2025-01-20T10:30:00.000Z",
        "endTime": "2025-01-20T10:35:32.000Z",
        "result": "black_win"       // black_win | white_win | draw | null
    },
    "boardState": [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  // 15x15æ•°ç»„
        // ...14è¡Œ
    ],
    "moves": [
        {
            "x": 7,
            "y": 7,
            "player": 1,           // 1=é»‘, 2=ç™½
            "timestamp": 1705746600000,
            "step": 1
        },
        // ...æ›´å¤šæ­¥éª¤
    ],
    "currentPlayer": 2,
    "moveCount": 25,
    "gameTime": 332,               // ç§’
    "settings": {
        "riskIndicator": true,
        "coordinateDisplay": false,
        "soundEffects": true,
        "animations": true
    },
    "timestamp": 1705747532000
}
```

### 3.2 VCFè¿›åº¦æ•°æ®æ ¼å¼

```javascript
{
    "version": "v3",
    "lastLevel": 2,
    "puzzlesCompleted": {
        "vcf-level1-001": true,
        "vcf-level1-002": true,
        // ...
    },
    "bestTimes": {
        "vcf-level1-001": 23.4,
        "vcf-level1-002": 45.2,
        // ...
    },
    "streak": 5,                  // è¿èƒœæ¬¡æ•°
    "totalCompleted": 15,
    "lastPlayedPuzzle": "vcf-level2-003",
    "lastPlayedTime": 1705747532000
}
```

**LocalStorageé”®**: `vcf_practice_progress_v3`

### 3.3 VCFé¢˜ç›®æ•°æ®ç»“æ„

```javascript
{
    "id": "vcf-level1-001",
    "level": 1,                    // 1=å…¥é—¨, 2=åˆçº§, 3=ä¸­çº§, 4=é«˜çº§
    "title": "å…¥é—¨ç¬¬1é¢˜ï¼šæ˜Ÿä½é‡‘é’©",
    "description": "é»‘æ£‹å·²ç»åœ¨æ˜Ÿä½å½¢æˆé‡‘é’©å†²å››ï¼Œåªå·®è¡¥ä¸Šæ­£ä¸­ç¼ºå£ã€‚",
    "layout": [                    // åˆå§‹æ£‹ç›˜å¸ƒå±€
        [6, 7, 1],                // [x, y, player]
        [7, 7, 1],
        [8, 7, 1],
        [8, 6, 1],
        [5, 7, 2],
        [9, 7, 2],
        [8, 8, 2]
    ],
    "solution": [                  // æ­£è§£åºåˆ—
        {
            "x": 9,
            "y": 6,
            "player": 1,
            "type": "attack",
            "desc": "é»‘æ£‹å†²å››"
        },
        {
            "x": 9,
            "y": 5,
            "player": 2,
            "type": "defense",
            "desc": "ç™½æ£‹é˜²å®ˆ"
        },
        {
            "x": 9,
            "y": 8,
            "player": 1,
            "type": "attack",
            "desc": "é»‘æ£‹å†å†²å››è·èƒœ"
        }
    ],
    "minMoves": 1,                 // ç©å®¶æœ€å°‘éœ€è¦èµ°å‡ æ­¥
    "maxMoves": 6,                 // ç©å®¶æœ€å¤šå¯ä»¥èµ°å‡ æ­¥
    "hints": [
        "å…ˆåœ¨å³ä¾§è¡¥ä¸­é—´ç©ºç‚¹",
        "ç™½æ£‹é˜²å®ˆåç»§ç»­å†²å››"
    ],
    "tags": ["å…¥é—¨", "é‡‘é’©", "å†²å››"]
}
```

### 3.4 è®¾ç½®æ•°æ®æ ¼å¼

```javascript
{
    "version": "1.0",
    "gameSettings": {
        "defaultMode": "PvE",
        "defaultDifficulty": "NORMAL",
        "defaultHintStrength": "NORMAL"
    },
    "interfaceSettings": {
        "boardTheme": "classic",
        "soundEffects": true,
        "animations": true
    },
    "aiSettings": {
        "algorithmMode": "CLASSIC"   // CLASSIC | ADVANCED
    },
    "assistSettings": {
        "riskIndicator": true,
        "coordinateDisplay": false,
        "autoSave": true,
        "forbiddenHints": true,
        "hintCooldown": 3000
    }
}
```

**LocalStorageé”®**: `gomoku_settings`

---

## 4. é£é™©æç¤ºç³»ç»Ÿå®ç°

### 4.1 é£é™©ç­‰çº§å®šä¹‰

```javascript
const RISK_LEVELS = {
    CRITICAL: {
        steps: 1,              // å¯¹æ‰‹1æ­¥å³å¯è·èƒœ
        color: 'rgba(255, 0, 0, 0.3)',
        priority: 10,
        message: 'å±é™©ï¼å¯¹æ‰‹ä¸‹ä¸€æ­¥å³å¯è·èƒœ'
    },
    HIGH: {
        steps: 2,
        color: 'rgba(255, 100, 0, 0.25)',
        priority: 8,
        message: 'é«˜é£é™©ï¼šå¯¹æ‰‹æœ‰2æ­¥æ€'
    },
    MEDIUM: {
        steps: 3,
        color: 'rgba(255, 200, 0, 0.2)',
        priority: 6,
        message: 'ä¸­ç­‰é£é™©ï¼šå¯¹æ‰‹å½¢æˆå¨èƒ'
    }
};
```

### 4.2 é£é™©åˆ†æç®—æ³•

```javascript
analyzeOpponentThreats(opponent) {
    const risks = [];
    
    // 1. æ£€æŸ¥å³å°†è·èƒœï¼ˆæ´»å››/äº”è¿ï¼‰
    const winningMoves = this.findWinningMove(opponent);
    if (winningMoves) {
        risks.push({
            level: 'CRITICAL',
            positions: [winningMoves],
            ...RISK_LEVELS.CRITICAL
        });
    }
    
    // 2. æ£€æŸ¥åŒå†²å››
    const doubleFourThreats = this.findDoubleFourThreats(opponent);
    if (doubleFourThreats.length > 0) {
        risks.push({
            level: 'CRITICAL',
            positions: doubleFourThreats,
            message: 'å¯¹æ‰‹å¯å½¢æˆåŒå†²å››'
        });
    }
    
    // 3. æ£€æŸ¥æ´»ä¸‰
    const liveThreeThreats = this.findLiveThreeThreats(opponent);
    if (liveThreeThreats.length > 0) {
        risks.push({
            level: 'HIGH',
            positions: liveThreeThreats,
            message: 'å¯¹æ‰‹æœ‰æ´»ä¸‰å¨èƒ'
        });
    }
    
    return risks;
}
```

### 4.3 Canvasç»˜åˆ¶é£é™©æç¤º

```javascript
drawRiskIndicators() {
    if (!this.riskIndicatorEnabled) return;
    
    const risks = analyzeOpponentThreats(opponent);
    
    risks.forEach(risk => {
        risk.positions.forEach(pos => {
            const cx = this.padding + pos.x * this.cellSize;
            const cy = this.padding + pos.y * this.cellSize;
            
            ctx.fillStyle = risk.color;
            ctx.beginPath();
            ctx.arc(cx, cy, 18, 0, Math.PI * 2);
            ctx.fill();
            
            // ç»˜åˆ¶è­¦å‘Šå›¾æ ‡
            ctx.fillStyle = risk.level === 'CRITICAL' ? '#f00' : '#ff6600';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('!', cx, cy);
        });
    });
}
```

---

## 5. å›æ”¾ç³»ç»Ÿå®Œæ•´å®ç°

### 5.1 å›æ”¾çŠ¶æ€ç®¡ç†

```javascript
class GameReplay {
    constructor(game, renderer) {
        this.game = game;
        this.renderer = renderer;
        this.moves = [];
        this.currentStep = 0;
        this.isPlaying = false;
        this.playSpeed = 1;          // 0.5x / 1x / 2x / 3x
        this.playTimer = null;
    }
    
    startReplay(gameData) {
        this.moves = gameData.moves;
        this.totalSteps = this.moves.length;
        this.currentStep = 0;
        this.game.reset();
        this.showReplayUI();
    }
    
    play() {
        if (this.currentStep >= this.totalSteps) return;
        
        this.isPlaying = true;
        this.updatePlayPauseButton();
        
        const interval = 1000 / this.playSpeed;
        this.playTimer = setInterval(() => {
            if (this.currentStep < this.totalSteps) {
                this.stepForward();
            } else {
                this.pause();
            }
        }, interval);
    }
    
    pause() {
        this.isPlaying = false;
        clearInterval(this.playTimer);
        this.updatePlayPauseButton();
    }
    
    stepForward() {
        if (this.currentStep >= this.totalSteps) return;
        const move = this.moves[this.currentStep];
        this.game.placePiece(move.x, move.y);
        this.renderer.render();
        this.currentStep++;
        this.updateProgress();
    }
    
    stepBackward() {
        if (this.currentStep <= 0) return;
        this.game.undo();
        this.renderer.render();
        this.currentStep--;
        this.updateProgress();
    }
    
    jumpToStep(index) {
        this.pause();
        this.game.reset();
        for (let i = 0; i < index && i < this.totalSteps; i++) {
            const move = this.moves[i];
            this.game.placePiece(move.x, move.y);
        }
        this.currentStep = index;
        this.renderer.render();
        this.updateProgress();
    }
    
    setSpeed(speed) {
        this.playSpeed = speed;
        if (this.isPlaying) {
            this.pause();
            this.play();
        }
    }
}
```

### 5.2 æ­¥éª¤åˆ—è¡¨ç”Ÿæˆ

```javascript
generateStepsList() {
    const container = document.getElementById('replay-steps-container');
    container.innerHTML = '';
    
    this.moves.forEach((move, index) => {
        const stepDiv = document.createElement('div');
        stepDiv.className = 'step-item';
        if (index === this.currentStep) {
            stepDiv.classList.add('current');
        }
        stepDiv.dataset.step = index;
        
        stepDiv.innerHTML = `
            <span class="step-number">${index + 1}</span>
            <span class="step-player">${move.player === 1 ? 'é»‘' : 'ç™½'}</span>
            <span class="step-position">${GameUtils.positionToNotation(move.x, move.y)}</span>
            <span class="step-time">${this.formatStepTime(move.timestamp)}</span>
        `;
        
        stepDiv.addEventListener('click', () => this.jumpToStep(index));
        container.appendChild(stepDiv);
    });
}
```

---

## 6. äº‹ä»¶æµç¨‹å®Œæ•´å›¾

### 6.1 è½å­äº‹ä»¶æµ

```
ç”¨æˆ·ç‚¹å‡»Canvas
    â†“
canvas.onclick è§¦å‘
    â†“
è®¡ç®—é¼ æ ‡åæ ‡ â†’ è½¬æ¢ä¸ºæ£‹ç›˜åæ ‡
    â†“
æ£€æŸ¥æ¸¸æˆæ¨¡å¼
    â”œâ”€ VCF_PRACTICE â†’ demo.handleVCFPracticeMove(x, y)
    â”‚   â”œâ”€ practiceManager.validateMove(x, y)
    â”‚   â”‚   â”œâ”€ æ­£ç¡® â†’ advanceStep()
    â”‚   â”‚   â”‚   â”œâ”€ è‡ªåŠ¨AIé˜²å®ˆ (400mså»¶è¿Ÿ)
    â”‚   â”‚   â”‚   â””â”€ æ£€æŸ¥å®Œæˆ â†’ æ˜¾ç¤ºç»“æœ
    â”‚   â”‚   â””â”€ é”™è¯¯ â†’ é«˜äº®æ­£ç¡®ä½ç½® + æç¤º
    â”‚   â””â”€ æ›´æ–°UI
    â”‚
    â””â”€ å…¶ä»–æ¨¡å¼ â†’ game.placePiece(x, y)
        â”œâ”€ åŸºç¡€éªŒè¯ï¼ˆè¾¹ç•Œ/å ç”¨/çŠ¶æ€ï¼‰
        â”œâ”€ ç¦æ‰‹æ£€æµ‹ï¼ˆé»‘æ£‹ï¼‰
        â”‚   â”œâ”€ æ˜¯ç¦æ‰‹ â†’ è¿”å›é”™è¯¯ â†’ é«˜äº®ç¦æ‰‹
        â”‚   â””â”€ éç¦æ‰‹ â†’ ç»§ç»­
        â”œâ”€ æ›´æ–°æ£‹ç›˜
        â”œâ”€ è®°å½•å†å²
        â”œâ”€ æ£€æŸ¥èƒœè´Ÿ
        â”‚   â”œâ”€ è·èƒœ â†’ ç»“æŸæ¸¸æˆ â†’ æ˜¾ç¤ºç»“æœæ¨¡æ€
        â”‚   â””â”€ æœªè·èƒœ â†’ æ£€æŸ¥å¹³å±€
        â”œâ”€ åˆ‡æ¢ç©å®¶
        â””â”€ è¿”å›ç»“æœ
            â†“
        demo.handleMoveResult(result)
            â”œâ”€ æ›´æ–°UI
            â”œâ”€ åŒæ­¥æ¸²æŸ“å™¨
            â”œâ”€ å¤„ç†æ¸¸æˆç»“æŸ
            â””â”€ è§¦å‘AIï¼ˆPvE/EvEï¼‰
                â†“
            executeAIMove()
                â”œâ”€ è®¾ç½®aiThinking = true
                â”œâ”€ æ˜¾ç¤º"AIæ€è€ƒä¸­"
                â”œâ”€ å»¶è¿Ÿ(thinkTime)
                â”œâ”€ ai.getMove(difficulty)
                â”œâ”€ game.placePiece(x, y)
                â””â”€ è®¾ç½®aiThinking = false
```

### 6.2 æ¨¡æ€æ¡†æ‰“å¼€/å…³é—­æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"è®¾ç½®"æŒ‰é’®
    â†“
demo.showSettings()
    â”œâ”€ ä»LocalStorageåŠ è½½å½“å‰è®¾ç½®
    â”œâ”€ å¡«å……è¡¨å•å…ƒç´ 
    â”œâ”€ modal.classList.add('active')
    â””â”€ ç»‘å®šäº‹ä»¶ç›‘å¬ï¼ˆä¿å­˜/é‡ç½®/å…³é—­ï¼‰
        â†“
ç”¨æˆ·ç‚¹å‡»"ä¿å­˜è®¾ç½®"
    â†“
demo.saveSettings()
    â”œâ”€ æ”¶é›†è¡¨å•æ•°æ®
    â”œâ”€ åº”ç”¨è®¾ç½®ï¼ˆæ›´æ–°game/rendereré…ç½®ï¼‰
    â”œâ”€ ä¿å­˜åˆ°LocalStorage
    â”œâ”€ modal.classList.remove('active')
    â””â”€ æ˜¾ç¤ºæˆåŠŸæç¤º
```

---

## 7. ä¸»é¢˜åˆ‡æ¢å®ç°ï¼ˆå¯é€‰æ‰©å±•ï¼‰

### 7.1 ä¸»é¢˜å®šä¹‰

```javascript
const THEMES = {
    classic: {
        name: 'ç»å…¸æœ¨è´¨',
        colors: {
            '--board-wood-light': '#f4e4bc',
            '--board-wood-medium': '#d4a574',
            '--board-wood-dark': '#8b4513',
            '--board-line-color': '#654321'
        }
    },
    modern: {
        name: 'ç°ä»£ç®€çº¦',
        colors: {
            '--board-wood-light': '#e8e8e8',
            '--board-wood-medium': '#c0c0c0',
            '--board-wood-dark': '#808080',
            '--board-line-color': '#404040'
        }
    },
    dark: {
        name: 'æš—é»‘ä¸»é¢˜',
        colors: {
            '--board-wood-light': '#2a2a2a',
            '--board-wood-medium': '#1a1a1a',
            '--board-wood-dark': '#0a0a0a',
            '--board-line-color': '#666666'
        }
    }
};
```

### 7.2 åˆ‡æ¢é€»è¾‘

```javascript
applyTheme(themeName) {
    const theme = THEMES[themeName];
    if (!theme) return;
    
    const root = document.documentElement;
    Object.entries(theme.colors).forEach(([key, value]) => {
        root.style.setProperty(key, value);
    });
    
    localStorage.setItem('gomoku_theme', themeName);
    this.currentTheme = themeName;
}
```

---

## 8. å“åº”å¼æ–­ç‚¹å®Œæ•´CSS

```css
/* æ¡Œé¢å¤§å± (â‰¥1200px) - é»˜è®¤æ ·å¼ */
.game-main {
    grid-template-columns: 300px 1fr;
    gap: var(--spacing-xl);
}

/* å¹³æ¿æ¨ªå± (768px - 1199px) */
@media (max-width: 1199px) {
    .game-main {
        grid-template-columns: 280px 1fr;
        gap: var(--spacing-lg);
    }
    
    .game-canvas {
        width: 480px;
        height: 480px;
    }
}

/* å¹³æ¿ç«–å±/æ‰‹æœºæ¨ªå± (600px - 767px) */
@media (max-width: 767px) {
    .game-main {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
    }
    
    .game-info-panel {
        order: 2;
    }
    
    .game-board-section {
        order: 1;
    }
    
    .game-canvas {
        width: 100%;
        max-width: 480px;
        height: auto;
        aspect-ratio: 1;
    }
}

/* æ‰‹æœºç«–å± (<600px) */
@media (max-width: 599px) {
    .game-title {
        font-size: 1.5rem;
    }
    
    .version-badge {
        font-size: 0.75rem;
    }
    
    .btn {
        padding: var(--spacing-xs) var(--spacing-sm);
        font-size: 0.9rem;
    }
    
    .modal-content {
        width: 95%;
        max-height: 90vh;
    }
}
```

---

## 9. å®Œæ•´çš„LocalStorageç®¡ç†

### 9.1 é”®åçº¦å®š

```javascript
const STORAGE_KEYS = {
    SETTINGS: 'gomoku_settings',
    VCF_PROGRESS: 'vcf_practice_progress_v3',
    AUTO_SAVE: 'gomoku_auto_save',
    THEME: 'gomoku_theme',
    STATS: 'gomoku_stats',
    VERSION: 'app_version'
};
```

### 9.2 ç»Ÿä¸€å­˜å‚¨æ¥å£

```javascript
class StorageManager {
    static save(key, data) {
        try {
            const jsonString = JSON.stringify(data);
            localStorage.setItem(key, jsonString);
            return true;
        } catch (error) {
            console.error(`[Storage] ä¿å­˜å¤±è´¥: ${key}`, error);
            if (error.name === 'QuotaExceededError') {
                this.handleQuotaExceeded();
            }
            return false;
        }
    }
    
    static load(key, defaultValue = null) {
        try {
            const jsonString = localStorage.getItem(key);
            return jsonString ? JSON.parse(jsonString) : defaultValue;
        } catch (error) {
            console.error(`[Storage] åŠ è½½å¤±è´¥: ${key}`, error);
            return defaultValue;
        }
    }
    
    static remove(key) {
        try {
            localStorage.removeItem(key);
            return true;
        } catch (error) {
            console.error(`[Storage] åˆ é™¤å¤±è´¥: ${key}`, error);
            return false;
        }
    }
    
    static clear() {
        try {
            localStorage.clear();
            return true;
        } catch (error) {
            console.error('[Storage] æ¸…ç©ºå¤±è´¥', error);
            return false;
        }
    }
    
    static handleQuotaExceeded() {
        if (confirm('å­˜å‚¨ç©ºé—´å·²æ»¡ï¼Œæ˜¯å¦æ¸…ç†æ—§æ•°æ®ï¼Ÿ')) {
            this.remove(STORAGE_KEYS.AUTO_SAVE);
            GameUtils.showMessage('å·²æ¸…ç†è‡ªåŠ¨ä¿å­˜æ•°æ®', 'info');
        }
    }
}
```

---

## 10. æ£€æŸ¥æ¸…å•

ä½¿ç”¨è¿™ä»½è¡¥å……æ–‡æ¡£ï¼Œç¡®è®¤ä»¥ä¸‹æ‰€æœ‰ç»†èŠ‚éƒ½å·²è¦†ç›–ï¼š

- [x] å®Œæ•´HTMLç»“æ„ï¼ˆæ‰€æœ‰æ¨¡æ€æ¡†ï¼‰
- [x] CSSåŠ¨ç”»å®Œæ•´åˆ—è¡¨
- [x] æ•°æ®æ ¼å¼è¯¦ç»†å®šä¹‰
- [x] é£é™©æç¤ºç³»ç»Ÿå®ç°
- [x] å›æ”¾ç³»ç»Ÿå®Œæ•´é€»è¾‘
- [x] äº‹ä»¶æµç¨‹å®Œæ•´å›¾
- [x] ä¸»é¢˜åˆ‡æ¢æœºåˆ¶
- [x] å“åº”å¼æ–­ç‚¹CSS
- [x] LocalStorageç®¡ç†
- [x] åŠ è½½å±å¹•
- [x] å¿«æ·é”®é¢æ¿
- [x] æ­¥éª¤åˆ—è¡¨UI
- [x] è®¾ç½®ç³»ç»Ÿæ‰€æœ‰é€‰é¡¹
- [x] VCFè¿›åº¦å­˜å‚¨
- [x] æ£‹å±€JSONæ ¼å¼

---

**æ€»ç»“**: æœ¬æ–‡æ¡£è¡¥å……äº†å‰9ä»½æ–‡æ¡£æœªè¯¦ç»†æè¿°çš„å®ç°ç»†èŠ‚ï¼Œä¸å‰é¢æ–‡æ¡£é…åˆä½¿ç”¨ï¼Œå¯ç¡®ä¿AIå®Œæ•´å¤åˆ»é¡¹ç›®çš„100%åŠŸèƒ½ã€‚

**ä½¿ç”¨å»ºè®®**: 
1. å…ˆé˜…è¯»00-09å·æ–‡æ¡£äº†è§£æ•´ä½“
2. å¼€å‘æ—¶å‚è€ƒæœ¬æ–‡æ¡£è·å–å…·ä½“å®ç°ç»†èŠ‚
3. é‡åˆ°ä¸ç¡®å®šçš„æ ¼å¼æˆ–ç»“æ„æŸ¥é˜…æœ¬æ–‡æ¡£
