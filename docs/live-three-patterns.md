# 五子棋活三形态分析

## 什么是活三？
活三是指：落子后形成三个同色棋子，且两端都有空位可以延伸成活四的形态。

## 所有活三形态（以黑棋为例，●表示黑棋，○表示白棋，_表示空位）

### 1. 连三型活三
```
_●●●_    (标准连三，两端都空)
```

### 2. 跳三型活三

#### 2.1 跳一活三
```
_●●_●_   (连二跳一)
_●_●●_   (跳一连二)
```

#### 2.2 跳一跳一形态（非活三）
```
_●_●_●_  (跳一跳一，这不是活三，因为无法直接形成活四)
```

## 详细分析

### 连三型活三 (_●●●_)
- 特征：三个棋子连续排列
- 空间需求：5格（_●●●_）
- 延伸能力：两端都可以延伸成活四
- 示例：
  ```
  位置: _ ● ● ● _
  索引: 0 1 2 3 4
  ```

### 跳一活三

#### 连二跳一 (_●●_●_)
- 特征：前两子连续，跳一格后有第三子
- 空间需求：6格（_●●_●_）
- 延伸能力：两端都可以延伸
- 示例：
  ```
  位置: _ ● ● _ ● _
  索引: 0 1 2 3 4 5
  ```

#### 跳一连二 (_●_●●_)
- 特征：第一子后跳一格，然后两子连续
- 空间需求：6格（_●_●●_）
- 延伸能力：两端都可以延伸
- 示例：
  ```
  位置: _ ● _ ● ● _
  索引: 0 1 2 3 4 5
  ```

## 非活三形态（容易混淆的）

### 1. 冲三（一端被堵）
```
○●●●_   (左端被堵)
_●●●○   (右端被堵)
边●●●_   (边界堵住一端)
```

### 2. 死三（两端都被堵）
```
○●●●○   (两端都被堵)
边●●●○   (边界+对方棋子)
```

### 3. 假跳三（无法形成活四）
```
_●_●_●_  (跳一跳一，无法直接形成活四)
```

## 检测算法要点

1. **连三检测**：检查5格范围内的 `_●●●_` 模式
2. **跳一检测**：检查6格范围内的 `_●●_●_` 和 `_●_●●_` 模式
3. **边界处理**：确保两端的空位在棋盘范围内
4. **延伸验证**：确保两端空位都能延伸（不被对方棋子或边界阻挡）

## 当前代码问题分析

从之前的代码来看，问题可能在于：
1. 跳三检测的范围和模式匹配不完整
2. 活三的"活"的定义不准确（两端延伸能力检查）
3. 不同类型活三的统一检测逻辑缺失