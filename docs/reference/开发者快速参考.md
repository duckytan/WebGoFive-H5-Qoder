# å¼€å‘è€…å¿«é€Ÿå‚è€ƒå¡ç‰‡

## ğŸš€ é¡¹ç›®å¯åŠ¨

### å¿«é€Ÿå¼€å§‹
```bash
# 1. åˆ›å»ºé¡¹ç›®ç»“æ„
mkdir h5-gomoku && cd h5-gomoku
mkdir js css test

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python -m http.server 8000

# 3. è®¿é—®æ¸¸æˆ
http://localhost:8000
```

### å¿…å¤‡æ–‡ä»¶
```
ğŸ“ é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ ğŸ“„ index.html          # ä¸»é¡µé¢
â”œâ”€â”€ ğŸ“ js/                # JavaScriptæ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“„ Utils.js        # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ ErrorHandler.js # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ ğŸ“„ Board.js        # æ£‹ç›˜çŠ¶æ€
â”‚   â”œâ”€â”€ ğŸ“„ RuleEngine.js   # è§„åˆ™å¼•æ“
â”‚   â”œâ”€â”€ ğŸ“„ CanvasRenderer.js # æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ ğŸ“„ InputHandler.js # è¾“å…¥å¤„ç†
â”‚   â”œâ”€â”€ ğŸ“„ GameManager.js  # æ¸¸æˆç®¡ç†
â”‚   â””â”€â”€ ğŸ“„ main.js         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ ğŸ“ css/               # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ style.css      # ä¸»æ ·å¼
â””â”€â”€ ğŸ“ test/              # æµ‹è¯•æ–‡ä»¶
    â””â”€â”€ ğŸ“„ test.html      # æµ‹è¯•é¡µé¢
```

---

## ğŸ”§ æ ¸å¿ƒAPIé€ŸæŸ¥

### Boardç±» - æ£‹ç›˜çŠ¶æ€ç®¡ç†
```javascript
const board = new Board();

// åŸºç¡€æ“ä½œ
board.placePiece(x, y, player)  // æ”¾ç½®æ£‹å­ â†’ boolean
board.getPiece(x, y)            // è·å–æ£‹å­ â†’ 0|1|2
board.isEmpty(x, y)             // æ£€æŸ¥ç©ºä½ â†’ boolean
board.isValidPosition(x, y)     // éªŒè¯åæ ‡ â†’ boolean

// çŠ¶æ€ç®¡ç†
board.clone()                   // æ·±æ‹·è´ â†’ Board
board.clear()                   // æ¸…ç©ºæ£‹ç›˜
board.isFull()                  // æ£€æŸ¥æ»¡ç›˜ â†’ boolean

// å±æ€§
board.size        // æ£‹ç›˜å°ºå¯¸ (15)
board.grid        // æ£‹ç›˜æ•°æ® [15][15]
board.lastMove    // æœ€åä¸€æ­¥ {x, y, player}
board.moveCount   // å·²ä¸‹æ£‹å­æ•°
```

### RuleEngineç±» - è§„åˆ™æ£€æµ‹
```javascript
const ruleEngine = new RuleEngine();

// æ ¸å¿ƒæ£€æµ‹
ruleEngine.checkWin(board, x, y, player)      // èƒœè´Ÿåˆ¤å®š â†’ boolean
ruleEngine.checkForbidden(board, x, y)        // ç¦æ‰‹æ£€æµ‹ â†’ string|null
ruleEngine.countLine(board, x, y, dx, dy, player) // è¿å­è®¡æ•° â†’ number

// ç¦æ‰‹ç±»å‹
'double-three'  // åŒä¸‰ç¦æ‰‹
'double-four'   // åŒå››ç¦æ‰‹  
'overline'      // é•¿è¿ç¦æ‰‹
null           // éç¦æ‰‹
```

### GameManagerç±» - æ¸¸æˆæ§åˆ¶
```javascript
const gameManager = new GameManager();

// æ¸¸æˆæ§åˆ¶
gameManager.makeMove(x, y)      // è½å­ â†’ boolean
gameManager.startNewGame()      // æ–°æ¸¸æˆ
gameManager.undoMove()          // æ‚”æ£‹ â†’ boolean
gameManager.toggleGameMode()    // åˆ‡æ¢æ¨¡å¼

// çŠ¶æ€è®¿é—®
gameManager.gameState          // æ¸¸æˆçŠ¶æ€å¯¹è±¡
gameManager.board             // æ£‹ç›˜å®ä¾‹
gameManager.ruleEngine        // è§„åˆ™å¼•æ“å®ä¾‹
```

### AIEngineç±» - AIå¼•æ“
```javascript
const aiEngine = new AIEngine('NORMAL'); // åˆ›å»ºæ­£å¸¸éš¾åº¦AI

// æ ¸å¿ƒæ–¹æ³•
await aiEngine.makeMove(board, player)     // AIè®¡ç®—æœ€ä½³è½å­ â†’ Promise<{x, y}>
aiEngine.setDifficulty(level)            // è®¾ç½®éš¾åº¦ç­‰çº§
aiEngine.getAnalysis(board, move)        // è·å–ç§»åŠ¨åˆ†æ
aiEngine.explainMove(board, move)        // è§£é‡ŠAIç§»åŠ¨åŸå› 

// éš¾åº¦ç­‰çº§
const levels = {
    'BEGINNER': 'æ–°æ‰‹',    // 2å±‚æœç´¢ï¼Œç®€å•è¯„ä¼°
    'NORMAL': 'æ­£å¸¸',      // 4å±‚æœç´¢ï¼Œæ¨¡å¼è¯†åˆ«
    'HARD': 'å›°éš¾',        // 8å±‚æœç´¢ï¼Œå¨èƒåˆ†æ
    'HELL': 'åœ°ç‹±'         // 12å±‚æœç´¢ï¼Œå®Œæ•´åˆ†æ
};

// æ€§èƒ½å‚æ•°
aiEngine.getPerformanceMetrics()         // è·å–æ€§èƒ½æŒ‡æ ‡
aiEngine.setTimeLimit(milliseconds)      // è®¾ç½®æ€è€ƒæ—¶é—´é™åˆ¶
```

### MoveHintSystemç±» - æ™ºèƒ½æç¤ºç³»ç»Ÿ
```javascript
const hintSystem = new MoveHintSystem(aiEngine, riskIndicator);

// æ ¸å¿ƒåŠŸèƒ½
await hintSystem.calculateHints(board, player)       // è®¡ç®—æœ€ä½³ç§»åŠ¨æç¤º
hintSystem.getCurrentHints()                        // è·å–å½“å‰æç¤º
hintSystem.clearHints()                             // æ¸…é™¤æç¤º
hintSystem.getRenderInfo()                          // è·å–æ¸²æŸ“ä¿¡æ¯

// æ§åˆ¶åŠŸèƒ½
hintSystem.setEnabled(boolean)                      // å¼€å…³æ§åˆ¶
hintSystem.isEnabled()                              // è·å–å¼€å…³çŠ¶æ€
hintSystem.setMaxHints(count)                       // è®¾ç½®æœ€å¤§æç¤ºæ•°é‡(1-5)

// æç¤ºç­‰çº§
const hintLevels = {
    BEST: { color: 'rgba(0, 255, 0, 0.4)', animation: 'pulse' },    // æœ€ä½³ä½ç½®
    GOOD: { color: 'rgba(0, 150, 255, 0.35)', animation: 'none' },  // æ¬¡ä¼˜ä½ç½®
    OKAY: { color: 'rgba(255, 255, 0, 0.3)', animation: 'none' }    // å¤‡é€‰ä½ç½®
};

// æç¤ºç±»å‹
const hintTypes = {
    DEFENSIVE: 'é˜²å®ˆå¿…è¦',     // é˜»æ­¢å¯¹æ‰‹è·èƒœ
    WINNING: 'ç›´æ¥è·èƒœ',       // äº”å­è¿ç æœºä¼š
    AI_BEST: 'AIæœ€ä½³',         // AIå¼•æ“æ¨è
    ALTERNATIVE: 'å¤‡é€‰ä½ç½®'   // å€™è¡¥é€‰æ‹©
};

// ä½¿ç”¨ç¤ºä¾‹
if (hintSystem.isEnabled()) {
    const hints = await hintSystem.calculateHints(board, currentPlayer);
    if (hints.length > 0) {
        console.log('æ¨èç§»åŠ¨:', hints);
        // åœ¨Canvasä¸Šæ¸²æŸ“æç¤º...
    }
}
```

### RiskIndicatorç±» - é£é™©ç‚¹æç¤ºç³»ç»Ÿ
```javascript
const riskIndicator = new RiskIndicator();

// æ ¸å¿ƒåŠŸèƒ½
riskIndicator.updateRisks(board, currentPlayer)     // æ›´æ–°é£é™©åˆ†æ
riskIndicator.getRenderInfo()                      // è·å–æ¸²æŸ“ä¿¡æ¯
riskIndicator.setEnabled(boolean)                  // å¼€å…³æ§åˆ¶
riskIndicator.isEnabled()                          // è·å–å¼€å…³çŠ¶æ€

// é£é™©ç­‰çº§
const riskLevels = {
    CRITICAL: { steps: 1, color: 'rgba(255, 0, 0, 0.3)' },    // 1æ­¥å†…è·èƒœ
    HIGH: { steps: 2, color: 'rgba(255, 100, 0, 0.25)' },     // 2æ­¥å†…è·èƒœ
    MEDIUM: { steps: 3, color: 'rgba(255, 200, 0, 0.2)' }     // 3æ­¥å†…å¨èƒ
};

// å¨èƒåˆ†æ
riskIndicator.analyzeOpponentThreats(board, opponent)       // åˆ†æå¯¹æ‰‹å¨èƒ
riskIndicator.findWinningMoves(board, player)              // æŸ¥æ‰¾å¿…èƒœç‚¹
riskIndicator.findTwoStepThreats(board, player)            // æŸ¥æ‰¾2æ­¥å¨èƒ

// ä½¿ç”¨ç¤ºä¾‹
if (riskIndicator.isEnabled()) {
    riskIndicator.updateRisks(board, currentPlayer);
    const risks = riskIndicator.getRenderInfo();
    // åœ¨Canvasä¸Šæ¸²æŸ“é£é™©æç¤º...
}
```

---

## ğŸ¯ æ¸¸æˆè§„åˆ™é€ŸæŸ¥

### åŸºç¡€è§„åˆ™
```
æ£‹ç›˜: 15Ã—15 (225ä¸ªäº¤å‰ç‚¹)
æ£‹å­: é»‘æ£‹(1) ç™½æ£‹(2)
å…ˆæ‰‹: é»‘æ£‹å…ˆè¡Œ
è·èƒœ: æ¨ªç«–æ–œä»»ä¸€æ–¹å‘äº”è¿
```

### ç¦æ‰‹è§„åˆ™ (ä»…é»‘æ£‹)
```
ä¸‰ä¸‰ç¦æ‰‹: ä¸€æ­¥æ£‹å½¢æˆä¸¤ä¸ªæ´»ä¸‰
å››å››ç¦æ‰‹: ä¸€æ­¥æ£‹å½¢æˆä¸¤ä¸ªå››  
é•¿è¿ç¦æ‰‹: ä¸€æ­¥æ£‹å½¢æˆå…­å­ä»¥ä¸Šè¿çº¿
ä¼˜å…ˆçº§: äº”è¿è·èƒœ > ç¦æ‰‹åˆ¤å®š
```

### æ´»ä¸‰å½¢æ€
```javascript
// è¿ä¸‰å‹æ´»ä¸‰ (éœ€è¦5æ ¼ç©ºé—´)
'_â—â—â—_'     // æ ‡å‡†è¿ä¸‰

// è·³ä¸‰å‹æ´»ä¸‰ (éœ€è¦6æ ¼ç©ºé—´)  
'_â—â—_â—_'    // è¿äºŒè·³ä¸€
'_â—_â—â—_'    // è·³ä¸€è¿äºŒ
```

---

## ğŸ› ï¸ å¼€å‘è§„èŒƒé€ŸæŸ¥

### å‘½åè§„èŒƒ
```javascript
// ç±»å: PascalCase
class GameManager {}

// æ–¹æ³•/å˜é‡: camelCase  
function makeMove() {}
let currentPlayer = 1;

// å¸¸é‡: UPPER_SNAKE_CASE
const BOARD_SIZE = 15;

// ç§æœ‰æ–¹æ³•: _å‰ç¼€
_validateInput() {}
```

### æ¨¡å—å¯¼å‡ºæ ‡å‡†æ¨¡æ¿
```javascript
class ModuleName {
    constructor() {
        // æ„é€ å‡½æ•°
    }
    
    // æ–¹æ³•å®ç°
}

// âœ… å¿…éœ€çš„å¯¼å‡ºä»£ç 
if (typeof window !== 'undefined') {
    window.ModuleName = ModuleName;
}
```

### é”™è¯¯å¤„ç†æ¨¡æ¿
```javascript
// âœ… è¾“å…¥éªŒè¯
function validateInput(x, y, player) {
    if (typeof x !== 'number' || typeof y !== 'number') {
        throw new Error('åæ ‡å¿…é¡»æ˜¯æ•°å­—');
    }
    if (x < 0 || x >= 15 || y < 0 || y >= 15) {
        throw new Error('åæ ‡è¶…å‡ºèŒƒå›´');
    }
    if (![1, 2].includes(player)) {
        throw new Error('ç©å®¶å‚æ•°æ— æ•ˆ');
    }
}

// âœ… å®‰å…¨çš„æ“ä½œ
try {
    validateInput(x, y, player);
    const result = dangerousOperation();
    return result;
} catch (error) {
    console.error('æ“ä½œå¤±è´¥:', error.message);
    return null;
}
```

---

## ğŸ§ª æµ‹è¯•é€ŸæŸ¥

### ç®€å•æµ‹è¯•æ¡†æ¶
```javascript
class SimpleTest {
    static assert(condition, message) {
        if (!condition) throw new Error(message);
    }
    
    static async runTest(name, testFn) {
        try {
            await testFn();
            console.log(`âœ… ${name}`);
            return true;
        } catch (error) {
            console.error(`âŒ ${name}: ${error.message}`);
            return false;
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
SimpleTest.runTest('æ£‹ç›˜åˆå§‹åŒ–æµ‹è¯•', () => {
    const board = new Board();
    SimpleTest.assert(board.size === 15, 'æ£‹ç›˜å°ºå¯¸åº”ä¸º15');
    SimpleTest.assert(board.moveCount === 0, 'åˆå§‹ç§»åŠ¨æ•°åº”ä¸º0');
});
```

### æµ‹è¯•è¦†ç›–ç‡è¦æ±‚
```
Boardç±»: â‰¥ 95%
RuleEngineç±»: â‰¥ 90%  
GameManagerç±»: â‰¥ 85%
CanvasRendererç±»: â‰¥ 80%
å…¶ä»–ç±»: â‰¥ 70%
```

---

## ğŸš¨ é—®é¢˜æ’æŸ¥é€ŸæŸ¥

### å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. æ¨¡å—åŠ è½½å¤±è´¥
```javascript
// æ£€æŸ¥æ¨¡å—æ˜¯å¦æ­£ç¡®å¯¼å‡º
console.log('Board:', typeof window.Board);
console.log('GameManager:', typeof window.GameManager);

// ç¡®ä¿HTMLä¸­è„šæœ¬åŠ è½½é¡ºåºæ­£ç¡®
// Utils.js â†’ ErrorHandler.js â†’ Board.js â†’ ...
```

#### 2. Canvasä¸æ˜¾ç¤º
```javascript
// æ£€æŸ¥Canvaså…ƒç´ 
const canvas = document.getElementById('game-canvas');
console.log('Canvas:', canvas);
console.log('Context:', canvas?.getContext('2d'));

// æ£€æŸ¥Canvaså°ºå¯¸
console.log('Canvas size:', canvas.width, canvas.height);
```

#### 3. ç¦æ‰‹æ£€æµ‹é”™è¯¯
```javascript
// è°ƒè¯•ç¦æ‰‹æ£€æµ‹
const result = ruleEngine.checkForbidden(board, x, y);
console.log('ç¦æ‰‹æ£€æµ‹ç»“æœ:', result);

// æ‰‹åŠ¨éªŒè¯æ´»ä¸‰
const isLiveThree = ruleEngine._checkLiveThree(board, x, y, 1);
console.log('æ´»ä¸‰æ£€æµ‹:', isLiveThree);
```

#### 4. AIæ— å“åº”
```javascript
// æ£€æŸ¥AIå¼•æ“çŠ¶æ€
console.log('AI Engine:', typeof window.AIEngine);

// ç›‘æ§AIè®¡ç®—æ—¶é—´
const startTime = performance.now();
aiEngine.makeMove(board, 2).then(move => {
    console.log('AIè®¡ç®—è€—æ—¶:', performance.now() - startTime);
    console.log('AIç§»åŠ¨:', move);
});

// æ£€æŸ¥éš¾åº¦è®¾ç½®
console.log('å½“å‰éš¾åº¦:', aiEngine.currentLevel);
console.log('æœ€å¤§æ·±åº¦:', aiEngine.maxDepth);

// å¼ºåˆ¶ä¸­æ–­é•¿æ—¶é—´è®¡ç®—
aiEngine.abortCalculation();
```

#### 5. AIæ€§èƒ½é—®é¢˜
```javascript
// æ€§èƒ½ç›‘æ§
const monitor = aiEngine.getPerformanceMetrics();
console.log('æ€§èƒ½æŒ‡æ ‡:', {
    avgResponseTime: monitor.avgResponseTime,
    nodesSearched: monitor.avgNodesSearched,
    cacheHitRate: monitor.cacheHitRate
});

// è°ƒæ•´AIå‚æ•°
if (monitor.avgResponseTime > 2000) {
    aiEngine.reduceSearchDepth();
    aiEngine.enableTimeManagement(true);
}
```

#### 6. é£é™©æç¤ºåŠŸèƒ½è°ƒè¯•
```javascript
// æ£€æŸ¥é£é™©æç¤ºç³»ç»ŸçŠ¶æ€
console.log('RiskIndicator:', typeof window.RiskIndicator);
console.log('é£é™©æç¤ºå¼€å…³:', riskIndicator.isEnabled());

// æ‰‹åŠ¨æ›´æ–°é£é™©åˆ†æ
riskIndicator.updateRisks(board, currentPlayer);
const risks = riskIndicator.getRenderInfo();
console.log('å½“å‰é£é™©ç‚¹:', risks);

// è°ƒè¯•å¨èƒæ£€æµ‹
const winningMoves = riskIndicator.findWinningMoves(board, opponentPlayer);
console.log('å¯¹æ‰‹å¿…èƒœç‚¹:', winningMoves);

const twoStepThreats = riskIndicator.findTwoStepThreats(board, opponentPlayer);
console.log('2æ­¥å¨èƒ:', twoStepThreats);

// æ£€æŸ¥æ¸²æŸ“æ•ˆæœ
if (risks.length === 0 && å¯¹æ‰‹æœ‰æ˜æ˜¾å¨èƒ) {
    console.warn('é£é™©æ£€æµ‹å¯èƒ½å¤±æ•ˆï¼Œæ£€æŸ¥ç®—æ³•å®ç°');
}

// å¼ºåˆ¶å¼€å¯/å…³é—­é£é™©æç¤º
riskIndicator.setEnabled(true);  // å¼€å¯
riskIndicator.setEnabled(false); // å…³é—­
gameManager.render(); // é‡æ–°æ¸²æŸ“
```

#### 8. æ™ºèƒ½æç¤ºç³»ç»Ÿè°ƒè¯•
```javascript
// æ£€æŸ¥æç¤ºç³»ç»ŸçŠ¶æ€
console.log('MoveHintSystem:', typeof window.MoveHintSystem);
console.log('æç¤ºç³»ç»Ÿå¼€å…³:', hintSystem.isEnabled());
console.log('å½“å‰æç¤ºæ•°é‡:', hintSystem.getCurrentHints().length);

// æ‰‹åŠ¨è®¡ç®—æç¤º
const hints = await hintSystem.calculateHints(board, currentPlayer);
console.log('è®¡ç®—ç»“æœ:', hints);

// è°ƒè¯•å„ç§æç¤ºç±»å‹
const defensiveMoves = hintSystem.findDefensiveMoves(board, currentPlayer);
const winningMoves = hintSystem.findWinningMoves(board, currentPlayer);
console.log('é˜²å®ˆä½ç½®:', defensiveMoves);
console.log('è·èƒœä½ç½®:', winningMoves);

// æ€§èƒ½ç›‘æ§
const startTime = performance.now();
await hintSystem.calculateHints(board, currentPlayer);
const duration = performance.now() - startTime;
console.log('æç¤ºè®¡ç®—è€—æ—¶:', duration.toFixed(2) + 'ms');

// æ£€æŸ¥AIå¼•æ“é›†æˆ
if (!hintSystem.aiEngine) {
    console.error('ç¼ºå°‘AIå¼•æ“ï¼Œæç¤ºåŠŸèƒ½ä¸å¯ç”¨');
}

// å†·å´æ—¶é—´æ£€æŸ¥
const timeSinceLastHint = Date.now() - gameManager.lastHintTime;
console.log('è·ç¦»ä¸Šæ¬¡æç¤º:', timeSinceLastHint, 'ms');

// å¼ºåˆ¶æ¸…é™¤æç¤º
hintSystem.clearHints();
gameManager.render();
```

#### 9. æç¤ºæ¸²æŸ“è°ƒè¯•
```javascript
// æ£€æŸ¥æ¸²æŸ“å™¨é›†æˆ
console.log('æ¸²æŸ“å™¨ç±»å‹:', renderer.constructor.name);
console.log('æ”¯æŒæç¤ºæ¸²æŸ“:', typeof renderer.renderMoveHints === 'function');

// æ£€æŸ¥æç¤ºæ¸²æŸ“ä¿¡æ¯
const renderInfo = hintSystem.getRenderInfo();
console.log('æ¸²æŸ“ä¿¡æ¯:', renderInfo);

// æ‰‹åŠ¨è§¦å‘æç¤ºæ¸²æŸ“
if (renderInfo.length > 0) {
    renderer.renderMoveHints();
}

// æ£€æŸ¥åŠ¨ç”»æ•ˆæœ
console.log('åŠ¨ç”»æ—¶é—´:', renderer.hintAnimationTime);
console.log('åŠ¨ç”»é€Ÿåº¦:', renderer.hintAnimationSpeed);

// æ£€æŸ¥Canvasäº‹ä»¶ç»‘å®š
const canvas = document.getElementById('game-canvas');
console.log('Canvasäº‹ä»¶ç›‘å¬å™¨:', {
    click: canvas.onclick !== null,
    mousemove: canvas.onmousemove !== null
});
```

---

## ğŸ“š æ–‡æ¡£å¿«é€Ÿå¯¼èˆª

### æ ¸å¿ƒæ–‡æ¡£
- ğŸ“– [æ–°é¡¹ç›®å¼€å‘æŒ‡å—.md](./æ–°é¡¹ç›®å¼€å‘æŒ‡å—.md) - å®Œæ•´å¼€å‘æŒ‡å—
- ğŸ® [äº”å­æ£‹è§„åˆ™ä¸ç®—æ³•.md](./äº”å­æ£‹è§„åˆ™ä¸ç®—æ³•.md) - è§„åˆ™å’Œç®—æ³•å®ç°  
- ğŸ“‹ [éœ€æ±‚è§„æ ¼ä¹¦.md](./éœ€æ±‚è§„æ ¼ä¹¦.md) - äº§å“éœ€æ±‚è§„æ ¼
- ğŸ”’ [é¡¹ç›®è§„èŒƒä¸å®‰å…¨æŒ‡å—.md](./é¡¹ç›®è§„èŒƒä¸å®‰å…¨æŒ‡å—.md) - ç¼–ç è§„èŒƒå’Œå®‰å…¨è¦æ±‚

### å†å²å‚è€ƒ (docsç›®å½•)
- ğŸ” [troubleshooting-guide.md](./docs/troubleshooting-guide.md) - åŸé¡¹ç›®é—®é¢˜æ€»ç»“
- ğŸ¯ [live-three-patterns.md](./docs/live-three-patterns.md) - æ´»ä¸‰å½¢æ€åˆ†æ
- ğŸ‘¤ [user-guide.md](./docs/user-guide.md) - ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- ğŸ‘¨â€ğŸ’» [developer-guide.md](./docs/developer-guide.md) - åŸå¼€å‘è€…æŒ‡å—

---

## âš¡ å¿«æ·é”®

### å¼€å‘ç¯å¢ƒ
```
Ctrl+Shift+I  # æ‰“å¼€å¼€å‘è€…å·¥å…·
F12          # æ‰“å¼€å¼€å‘è€…å·¥å…·  
Ctrl+R       # åˆ·æ–°é¡µé¢
Ctrl+Shift+R # å¼ºåˆ¶åˆ·æ–°(å¿½ç•¥ç¼“å­˜)
F5           # åˆ·æ–°é¡µé¢
```

---

## âš ï¸ é£é™©ç‚¹æç¤ºåŠŸèƒ½ä½¿ç”¨æŒ‡å—

### åŠŸèƒ½ä»‹ç»
é£é™©ç‚¹æç¤ºç³»ç»Ÿèƒ½å¤Ÿåˆ†æå¯¹æ‰‹çš„å¨èƒï¼Œå¹¶åœ¨ç›¸åº”ä½ç½®ç”¨æ·¡è‰²åŠé€æ˜çš„æ–¹å¼æé†’ç©å®¶ã€‚è¯¥åŠŸèƒ½å¯ä»¥éšæ—¶å¼€å¯æˆ–å…³é—­ã€‚

### å¿«é€Ÿé›†æˆ
```javascript
// 1. åˆ›å»ºé£é™©æç¤ºå™¨
const riskIndicator = new RiskIndicator();

// 2. é›†æˆåˆ°æ¸¸æˆç®¡ç†å™¨
class GameManager {
    constructor() {
        this.board = new Board();
        this.ruleEngine = new RuleEngine();
        this.riskIndicator = new RiskIndicator(); // æ·»åŠ é£é™©æç¤ºå™¨
        this.renderer = new CanvasRendererWithRiskIndicator('game-canvas', this.riskIndicator);
        this.setupUI(); // è®¾ç½®ç”¨æˆ·ç•Œé¢
    }

    // 3. åœ¨æ¯æ­¥æ£‹åæ›´æ–°é£é™©åˆ†æ
    makeMove(x, y) {
        if (this.board.placePiece(x, y, this.currentPlayer)) {
            // æ›´æ–°é£é™©æç¤º
            this.riskIndicator.updateRisks(this.board, this.currentPlayer);
            
            // å…¶ä»–æ¸¸æˆé€»è¾‘...
            this.currentPlayer = this.currentPlayer === 1 ? 2 : 1;
            this.render();
        }
    }

    // 4. è®¾ç½®å¼€å…³æŒ‰é’®
    setupUI() {
        const toggleButton = document.createElement('button');
        toggleButton.id = 'risk-indicator-toggle';
        toggleButton.textContent = 'é£é™©æç¤º: å¼€å¯';
        toggleButton.onclick = () => this.toggleRiskIndicator();
        
        const gameControls = document.getElementById('game-controls');
        gameControls.appendChild(toggleButton);
    }

    // 5. å¼€å…³æ§åˆ¶
    toggleRiskIndicator() {
        const newState = !this.riskIndicator.isEnabled();
        this.riskIndicator.setEnabled(newState);
        
        const button = document.getElementById('risk-indicator-toggle');
        button.textContent = `é£é™©æç¤º: ${newState ? 'å¼€å¯' : 'å…³é—­'}`;
        
        this.render(); // é‡æ–°æ¸²æŸ“
    }
}
```

### Canvasæ¸²æŸ“é›†æˆ
```javascript
class CanvasRendererWithRiskIndicator {
    constructor(canvasId, riskIndicator) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.riskIndicator = riskIndicator;
        this.cellSize = 30;
        this.boardOffset = 20;
    }
    
    // ä¸»æ¸²æŸ“æ–¹æ³•
    render(board, gameState) {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        
        this.renderBoard();              // æ¸²æŸ“æ£‹ç›˜
        this.renderRiskIndicators();     // æ¸²æŸ“é£é™©æç¤ºï¼ˆåœ¨æ£‹å­ä¹‹å‰ï¼‰
        this.renderPieces(board);        // æ¸²æŸ“æ£‹å­
    }
    
    // æ¸²æŸ“é£é™©æç¤º
    renderRiskIndicators() {
        const risks = this.riskIndicator.getRenderInfo();
        
        for (const risk of risks) {
            const screenX = this.boardOffset + risk.x * this.cellSize;
            const screenY = this.boardOffset + risk.y * this.cellSize;
            
            // ç»˜åˆ¶æ·¡è‰²åœ†å½¢æç¤º
            this.ctx.save();
            this.ctx.fillStyle = risk.color;
            this.ctx.beginPath();
            this.ctx.arc(screenX, screenY, this.cellSize * 0.4, 0, 2 * Math.PI);
            this.ctx.fill();
            
            // å…³é”®å¨èƒæ·»åŠ è¾¹æ¡†
            if (risk.level === 'CRITICAL') {
                this.ctx.strokeStyle = 'rgba(255, 0, 0, 0.5)';
                this.ctx.lineWidth = 2;
                this.ctx.stroke();
            }
            
            this.ctx.restore();
        }
    }
}
```

### é£é™©ç­‰çº§è¯´æ˜
| ç­‰çº§ | å¨èƒæ­¥æ•° | é¢œè‰² | æè¿° |
|------|----------|------|------|
| CRITICAL | 1æ­¥ | æ·¡çº¢è‰² | å¯¹æ‰‹ä¸‹ä¸€æ­¥å³å¯è·èƒœ |
| HIGH | 2æ­¥ | æ·¡æ©™è‰² | å¯¹æ‰‹2æ­¥å†…å¯èƒ½è·èƒœ |
| MEDIUM | 3æ­¥ | æ·¡é»„è‰² | å¯¹æ‰‹å¯å½¢æˆå¼ºå¨èƒï¼ˆæ´»å››ã€æ´»ä¸‰ï¼‰ |

### å®ç”¨æŠ€å·§
```javascript
// æ ¹æ®æ¸¸æˆé˜¶æ®µè°ƒæ•´é£é™©æç¤º
if (board.moveCount < 10) {
    // å¼€å±€é˜¶æ®µï¼Œå…³é—­é£é™©æç¤ºé¿å…å¹²æ‰°
    riskIndicator.setEnabled(false);
} else if (board.moveCount > 20) {
    // ä¸­å±€é˜¶æ®µï¼Œå¼€å¯é£é™©æç¤ºå¸®åŠ©æ–°æ‰‹
    riskIndicator.setEnabled(true);
}

// ä»…åœ¨PvEæ¨¡å¼ä¸‹æä¾›é£é™©æç¤º
if (gameMode === 'PvE' && currentPlayer === 1) { // ç©å®¶å›åˆ
    riskIndicator.setEnabled(true);
} else if (gameMode === 'PvP') {
    // PvPæ¨¡å¼å¯é€‰æ‹©æ€§å¼€å¯
    riskIndicator.setEnabled(settings.enableRiskHints);
}

// æ ¹æ®éš¾åº¦è°ƒæ•´æç¤ºç¨‹åº¦
switch (difficulty) {
    case 'BEGINNER':
        // æ–°æ‰‹æ¨¡å¼ï¼šæ˜¾ç¤ºæ‰€æœ‰é£é™©
        riskIndicator.setEnabled(true);
        break;
    case 'NORMAL':
        // æ­£å¸¸æ¨¡å¼ï¼šä»…æ˜¾ç¤ºé«˜é£é™©
        // å¯ä»¥è¿‡æ»¤æ‰MEDIUMçº§åˆ«çš„é£é™©
        break;
    case 'HARD':
        // å›°éš¾æ¨¡å¼ï¼šä»…æ˜¾ç¤ºCRITICALé£é™©
        riskIndicator.setEnabled(false);
        break;
}
```

### æ€§èƒ½ä¼˜åŒ–
```javascript
// é™åˆ¶é£é™©æ£€æµ‹é¢‘ç‡
class ThrottledRiskIndicator extends RiskIndicator {
    constructor() {
        super();
        this.lastUpdateTime = 0;
        this.updateInterval = 500; // 500msæ›´æ–°ä¸€æ¬¡
    }
    
    updateRisks(board, currentPlayer) {
        const now = Date.now();
        if (now - this.lastUpdateTime > this.updateInterval) {
            super.updateRisks(board, currentPlayer);
            this.lastUpdateTime = now;
        }
    }
}

// ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è®¡ç®—
class CachedRiskIndicator extends RiskIndicator {
    constructor() {
        super();
        this.riskCache = new Map();
    }
    
    analyzeOpponentThreats(board, opponentPlayer) {
        const boardHash = this.getBoardHash(board);
        
        if (this.riskCache.has(boardHash)) {
            return this.riskCache.get(boardHash);
        }
        
        const risks = super.analyzeOpponentThreats(board, opponentPlayer);
        this.riskCache.set(boardHash, risks);
        
        // é™åˆ¶ç¼“å­˜å¤§å°
        if (this.riskCache.size > 100) {
            const firstKey = this.riskCache.keys().next().value;
            this.riskCache.delete(firstKey);
        }
        
        return risks;
    }
}
```

### æµ‹è¯•ç”¨ä¾‹
```javascript
// åŸºæœ¬åŠŸèƒ½æµ‹è¯•
SimpleTest.runTest('é£é™©æç¤ºåŸºæœ¬åŠŸèƒ½', () => {
    const riskIndicator = new RiskIndicator();
    const board = new Board();
    
    // æµ‹è¯•å¼€å…³åŠŸèƒ½
    SimpleTest.assert(riskIndicator.isEnabled() === true, 'é»˜è®¤åº”å¼€å¯');
    
    riskIndicator.setEnabled(false);
    SimpleTest.assert(riskIndicator.isEnabled() === false, 'åº”èƒ½å…³é—­');
    
    // æµ‹è¯•é£é™©æ›´æ–°
    riskIndicator.setEnabled(true);
    riskIndicator.updateRisks(board, 1);
    const risks = riskIndicator.getRenderInfo();
    SimpleTest.assert(Array.isArray(risks), 'åº”è¿”å›æ•°ç»„');
});

// å¨èƒæ£€æµ‹æµ‹è¯•
SimpleTest.runTest('å¨èƒæ£€æµ‹å‡†ç¡®æ€§', () => {
    const riskIndicator = new RiskIndicator();
    const board = new Board();
    
    // è®¾ç½®ä¸€ä¸ªå³å°†è·èƒœçš„å±€é¢
    board.placePiece(7, 7, 2); // ç™½æ£‹
    board.placePiece(8, 8, 2);
    board.placePiece(9, 9, 2);
    board.placePiece(10, 10, 2);
    // ç™½æ£‹åœ¨(6,6)ä½ç½®å¯ä»¥è·èƒœ
    
    const winningMoves = riskIndicator.findWinningMoves(board, 2);
    SimpleTest.assert(winningMoves.length > 0, 'åº”æ£€æµ‹åˆ°å¿…èƒœç‚¹');
    
    const hasWinningMove = winningMoves.some(move => move.x === 6 && move.y === 6);
    SimpleTest.assert(hasWinningMove, 'åº”æ£€æµ‹åˆ°(6,6)ä½ç½®çš„å¿…èƒœ');
});

// æ™ºèƒ½æç¤ºç³»ç»Ÿæµ‹è¯•
SimpleTest.runTest('æ™ºèƒ½æç¤ºåŸºæœ¬åŠŸèƒ½', async () => {
    const aiEngine = new AIEngine('NORMAL');
    const riskIndicator = new RiskIndicator();
    const hintSystem = new MoveHintSystem(aiEngine, riskIndicator);
    const board = new Board();
    
    // æµ‹è¯•åŸºæœ¬åŠŸèƒ½
    SimpleTest.assert(hintSystem.isEnabled() === true, 'é»˜è®¤åº”å¼€å¯');
    SimpleTest.assert(hintSystem.getCurrentHints().length === 0, 'åˆå§‹æ— æç¤º');
    
    // æµ‹è¯•æç¤ºè®¡ç®—
    const hints = await hintSystem.calculateHints(board, 1);
    SimpleTest.assert(Array.isArray(hints), 'åº”è¿”å›æ•°ç»„');
    SimpleTest.assert(hints.length <= 3, 'æç¤ºæ•°é‡ä¸è¶…è¿‡3ä¸ª');
    
    // æµ‹è¯•æç¤ºç»“æ„
    if (hints.length > 0) {
        const hint = hints[0];
        SimpleTest.assert(typeof hint.x === 'number', 'åº”æœ‰xåæ ‡');
        SimpleTest.assert(typeof hint.y === 'number', 'åº”æœ‰yåæ ‡');
        SimpleTest.assert(typeof hint.reason === 'string', 'åº”æœ‰åŸå› è¯´æ˜');
        SimpleTest.assert(['BEST', 'GOOD', 'OKAY'].includes(hint.level), 'åº”æœ‰æœ‰æ•ˆç­‰çº§');
    }
});

// æç¤ºä¼˜å…ˆçº§æµ‹è¯•
SimpleTest.runTest('æç¤ºä¼˜å…ˆçº§æ­£ç¡®æ€§', async () => {
    const aiEngine = new AIEngine('NORMAL');
    const riskIndicator = new RiskIndicator();
    const hintSystem = new MoveHintSystem(aiEngine, riskIndicator);
    const board = new Board();
    
    // è®¾ç½®ä¸€ä¸ªç´§æ€¥å±€é¢ï¼šå¯¹æ‰‹å³å°†è·èƒœ
    board.placePiece(7, 7, 2); // ç™½æ£‹
    board.placePiece(8, 8, 2);
    board.placePiece(9, 9, 2);
    board.placePiece(10, 10, 2);
    // é»‘æ£‹å¿…é¡»åœ¨(6,6)é˜²å®ˆ
    
    const hints = await hintSystem.calculateHints(board, 1);
    SimpleTest.assert(hints.length > 0, 'åº”æœ‰é˜²å®ˆæç¤º');
    
    const defensiveHint = hints.find(h => h.type === 'DEFENSIVE');
    SimpleTest.assert(defensiveHint !== undefined, 'åº”æœ‰é˜²å®ˆç±»å‹æç¤º');
    SimpleTest.assert(defensiveHint.level === 'BEST', 'é˜²å®ˆåº”ä¸ºæœ€é«˜ä¼˜å…ˆçº§');
});

// æ¸²æŸ“é›†æˆæµ‹è¯•
SimpleTest.runTest('Canvasæ¸²æŸ“é›†æˆ', () => {
    // åˆ›å»ºæµ‹è¯•Canvas
    const canvas = document.createElement('canvas');
    canvas.id = 'test-canvas';
    canvas.width = 480;
    canvas.height = 480;
    document.body.appendChild(canvas);
    
    const riskIndicator = new RiskIndicator();
    const hintSystem = new MoveHintSystem(null, riskIndicator);
    const renderer = new CanvasRendererWithHints('test-canvas', riskIndicator, hintSystem);
    
    SimpleTest.assert(renderer.canvas !== null, 'Canvasåº”æ­£å¸¸åˆå§‹åŒ–');
    SimpleTest.assert(renderer.ctx !== null, 'Contextåº”æ­£å¸¸åˆ›å»º');
    SimpleTest.assert(typeof renderer.renderMoveHints === 'function', 'åº”æœ‰æç¤ºæ¸²æŸ“æ–¹æ³•');
    
    // æ¸…ç†æµ‹è¯•ç¯å¢ƒ
    document.body.removeChild(canvas);
});
```

---

## ğŸ’¡ æ™ºèƒ½æç¤ºåŠŸèƒ½ä½¿ç”¨æŒ‡å—

### åŠŸèƒ½ä»‹ç»
æ™ºèƒ½æç¤ºç³»ç»Ÿèƒ½å¤Ÿé€šè¿‡AIè®¡ç®—ä¸ºç©å®¶æ¨è1-3ä¸ªæœ€æœ‰åˆ©çš„è½å­ä½ç½®ï¼Œå¸®åŠ©æ–°æ‰‹å­¦ä¹ å’Œæå‡æ¸¸æˆä½“éªŒã€‚

### å¿«é€Ÿé›†æˆ
```javascript
// 1. åˆ›å»ºæ™ºèƒ½æç¤ºç³»ç»Ÿ
const aiEngine = new AIEngine('NORMAL');
const riskIndicator = new RiskIndicator();
const hintSystem = new MoveHintSystem(aiEngine, riskIndicator);

// 2. é›†æˆåˆ°æ¸¸æˆç®¡ç†å™¨
class GameManager {
    constructor() {
        this.board = new Board();
        this.aiEngine = new AIEngine('NORMAL');
        this.riskIndicator = new RiskIndicator();
        this.hintSystem = new MoveHintSystem(this.aiEngine, this.riskIndicator); // æ·»åŠ æç¤ºç³»ç»Ÿ
        this.renderer = new CanvasRendererWithHints('game-canvas', this.riskIndicator, this.hintSystem);
        this.setupHintUI(); // è®¾ç½®æç¤ºç•Œé¢
    }

    // 3. è®¾ç½®æç¤ºç›¸å…³UI
    setupHintUI() {
        // åˆ›å»ºæç¤ºæŒ‰é’®
        const hintButton = document.createElement('button');
        hintButton.id = 'move-hint-button';
        hintButton.textContent = 'ğŸ’¡ è·å–æç¤º (H)';
        hintButton.onclick = () => this.requestHint();
        
        // åˆ›å»ºå¼€å…³æŒ‰é’®
        const toggleButton = document.createElement('button');
        toggleButton.id = 'hint-toggle-button';
        toggleButton.textContent = 'æ™ºèƒ½æç¤º: å¼€å¯';
        toggleButton.onclick = () => this.toggleHintSystem();
        
        const gameControls = document.getElementById('game-controls');
        gameControls.appendChild(hintButton);
        gameControls.appendChild(toggleButton);
    }

    // 4. æç¤ºè¯·æ±‚å¤„ç†
    async requestHint() {
        try {
            const hints = await this.hintSystem.calculateHints(this.board, this.currentPlayer);
            if (hints.length > 0) {
                this.displayHints(hints);
            }
        } catch (error) {
            console.error('è®¡ç®—æç¤ºå¤±è´¥:', error);
        }
    }
}
```

### æç¤ºç±»å‹è¯´æ˜
| ç±»å‹ | ä¼˜å…ˆçº§ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|----------|------|----------|
| **DEFENSIVE** | 100 | é˜²å®ˆå¿…è¦ | å¯¹æ‰‹å³å°†è·èƒœï¼Œå¿…é¡»é˜²å®ˆ |
| **WINNING** | 200 | ç›´æ¥è·èƒœ | äº”å­è¿ç è·èƒœæœºä¼š |
| **AI_BEST** | 80 | AIæœ€ä½³ | AIå¼•æ“æ¨èçš„æœ€ä¼˜ä½ç½® |
| **ALTERNATIVE** | 70-50 | å¤‡é€‰ä½ç½® | å€™è¡¥é€‰æ‹©ï¼ŒæŒ‰è¯„åˆ†æ’åº |

### é”®ç›˜å¿«æ·é”®
```javascript
// è®¾ç½®é”®ç›˜å¿«æ·é”®
document.addEventListener('keydown', (event) => {
    if (event.key.toLowerCase() === 'h' && !event.ctrlKey && !event.altKey) {
        event.preventDefault();
        gameManager.requestHint(); // è¯·æ±‚æç¤º
    }
});
```

### æ€§èƒ½ä¼˜åŒ–æŠ€å·§
```javascript
// é™åˆ¶AIæœç´¢æ·±åº¦ä»¥åŠ å¿«å“åº”
class OptimizedMoveHintSystem extends MoveHintSystem {
    async getAIRecommendations(board, player) {
        // ä¸´æ—¶é™ä½æœç´¢æ·±åº¦
        const originalDepth = this.aiEngine.maxDepth;
        this.aiEngine.maxDepth = Math.min(4, originalDepth);
        
        try {
            return await super.getAIRecommendations(board, player);
        } finally {
            this.aiEngine.maxDepth = originalDepth;
        }
    }
}

// å†·å´æœºåˆ¶é˜²æ­¢è¿‡åº¦ä½¿ç”¨
class ThrottledHintSystem extends MoveHintSystem {
    constructor(aiEngine, riskIndicator) {
        super(aiEngine, riskIndicator);
        this.cooldownPeriod = 3000; // 3ç§’å†·å´
        this.lastHintTime = 0;
    }
    
    async calculateHints(board, player) {
        const now = Date.now();
        if (now - this.lastHintTime < this.cooldownPeriod) {
            throw new Error('è¯·ç­‰å¾…å†·å´æ—¶é—´ç»“æŸ');
        }
        
        const result = await super.calculateHints(board, player);
        this.lastHintTime = now;
        return result;
    }
}
```

### è‡ªå®šä¹‰æç¤ºæ•ˆæœ
```javascript
// è‡ªå®šä¹‰æ¸²æŸ“æ•ˆæœ
class CustomHintRenderer extends CanvasRendererWithHints {
    renderMoveHints() {
        const hints = this.hintSystem.getRenderInfo();
        
        for (let i = 0; i < hints.length; i++) {
            const hint = hints[i];
            const screenX = this.boardOffset + hint.x * this.cellSize;
            const screenY = this.boardOffset + hint.y * this.cellSize;
            
            // è‡ªå®šä¹‰æ¸²æŸ“æ•ˆæœ
            this.renderCustomHint(screenX, screenY, hint, i + 1);
        }
    }
    
    renderCustomHint(x, y, hint, priority) {
        this.ctx.save();
        
        // æ ¹æ®ç±»å‹é€‰æ‹©ä¸åŒæ ·å¼
        switch (hint.type) {
            case 'DEFENSIVE':
                this.renderDefensiveHint(x, y);
                break;
            case 'WINNING':
                this.renderWinningHint(x, y);
                break;
            default:
                this.renderNormalHint(x, y, hint.color);
        }
        
        this.ctx.restore();
    }
}
```

### æ¸¸æˆå†…å¿«æ·é”® (è®¡åˆ’å®ç°)
```
Ctrl+N / Cmd+N  # æ–°æ¸¸æˆ
Ctrl+Z / Cmd+Z  # æ‚”æ£‹  
M              # åˆ‡æ¢æ¨¡å¼
Esc            # å…³é—­å¼¹çª—
```

---

## ğŸ¯ å¼€å‘æ£€æŸ¥æ¸…å•

### æ¯æ—¥å¼€å‘æ£€æŸ¥
```
â˜ ä»£ç éµå¾ªå‘½åè§„èŒƒ
â˜ æ‰€æœ‰æ¨¡å—æ­£ç¡®å¯¼å‡º  
â˜ è¾“å…¥éªŒè¯å®Œæ•´
â˜ é”™è¯¯å¤„ç†åˆ°ä½
â˜ æµ‹è¯•ç”¨ä¾‹æ›´æ–°
â˜ æ–‡æ¡£åŒæ­¥æ›´æ–°
```

### æäº¤å‰æ£€æŸ¥
```
â˜ ESLintæ£€æŸ¥é€šè¿‡
â˜ å•å…ƒæµ‹è¯•é€šè¿‡
â˜ åŠŸèƒ½æµ‹è¯•æ­£å¸¸
â˜ æ€§èƒ½æ— æ˜æ˜¾ä¸‹é™
â˜ æµè§ˆå™¨å…¼å®¹æ€§æ­£å¸¸
â˜ ä»£ç å·²å®¡æŸ¥
```

---

*æœ¬å‚è€ƒå¡ç‰‡æä¾›å¼€å‘è¿‡ç¨‹ä¸­çš„å…³é”®ä¿¡æ¯å¿«é€ŸæŸ¥æ‰¾ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ã€‚*